version: 2
models:
  - name: silver_metrics__chain_overview
    columns:
      - name: BLOCKCHAIN
        tests:
          - not_null
      - name: CATEGORY
        tests:
          - not_null
      - name: DEFILLAMA_VOLUME
        tests:
          - not_null
      - name: CROSSCHAIN_VOLUME
        tests:
          - not_null
      - name: diff_defillama_percent
        tests:
          - dbt_expectations.expect_column_values_to_be_between:
              min_value: 0
              max_value: 30.00
              severity: error
              where: "inserted_timestamp >= systimestamp() - interval '24 hours'"
      - name: INSERTED_TIMESTAMP
        tests:
          - not_null
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 8
      - name: MODIFIED_TIMESTAMP
        tests:
          - not_null
          - dbt_expectations.expect_row_values_to_have_recent_data:
              datepart: day
              interval: 8
      - name: CHAIN_OVERVIEW_ID 
        tests:
          - not_null
      - name: INVOCATION_ID 
        tests:
          - not_null